# language: ru

Функционал: Голосовой ввод через Telegram бота с LLM
  Как пользователь фитнес-трекера
  Я хочу добавлять упражнения голосом в свободной форме
  Чтобы бот понимал меня независимо от формулировки

  Предыстория:
    Допустим пользователь авторизован в Telegram боте
    И настроен OpenAI API ключ

  Сценарий: LLM понимает команду добавления упражнения
    Когда пользователь говорит "запиши жим штанги лёжа 80 кг 8 раз 3 подхода"
    Тогда LLM формирует команду 'gym add "жим штанги лёжа" 80kg 8reps 3sets'
    И CLI выполняется успешно
    И бот отвечает подтверждением добавления

  Сценарий: LLM понимает числа прописью
    Когда пользователь говорит "добавь присед сто двадцать килограмм пять повторений четыре подхода"
    Тогда LLM формирует команду 'gym add "присед" 120kg 5reps 4sets'
    И CLI выполняется успешно

  Сценарий: LLM понимает разговорные формулировки
    Когда пользователь говорит "сделал становую 140 кило 3 на 5, колено болело"
    Тогда LLM формирует команду 'gym add "становая" 140kg 3reps 5sets --note "колено болело"'
    И CLI выполняется успешно

  Сценарий: LLM понимает запрос статистики за сегодня
    Когда пользователь говорит "покажи что я сегодня натренировал"
    Тогда LLM формирует команду 'gym today'
    И CLI выполняется успешно
    И бот отправляет результат выполнения

  Сценарий: LLM понимает запрос максимума
    Когда пользователь говорит "а какой у меня рекорд был в становой тяге"
    Тогда LLM формирует команду 'gym max "становая тяга"'
    И CLI выполняется успешно

  Сценарий: LLM понимает запрос последней тренировки
    Когда пользователь говорит "когда последний раз приседал"
    Тогда LLM формирует команду 'gym last "присед"'
    И CLI выполняется успешно

  Сценарий: LLM обрабатывает неизвестную команду
    Когда пользователь говорит "расскажи анекдот"
    Тогда LLM возвращает сообщение об ошибке
    И бот отвечает "Я помогаю только с тренировками"

  Структура сценария: LLM корректно парсит разные формулировки
    Когда пользователь говорит "<голосовая_команда>"
    Тогда LLM формирует команду '<cli_команда>'

    Примеры:
      | голосовая_команда                              | cli_команда                                |
      | добавь жим 80 кг 8 раз 3 подхода               | gym add "жим" 80kg 8reps 3sets             |
      | запиши присед сто на пять по четыре           | gym add "присед" 100kg 5reps 4sets         |
      | что я сегодня делал                            | gym today                                  |
      | покажи тренировку за сегодня                  | gym today                                  |
      | какой мой максимум на жиме лёжа               | gym max "жим лёжа"                         |
      | когда делал становую последний раз            | gym last "становая"                        |
